<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.14
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-safe_roles">safe_roles</h1>

<h4 id="label-Table+of+Contents">Table of Contents</h4>
<ol><li>
<p><a href="#label-Description">Description</a></p>
</li><li>
<p><a href="#label-Setup">Setup - The basics of getting started with safe_roles</a></p>
<ul><li>
<p><a href="#label-What+safe_roles+affects">What safe_roles affects</a></p>
</li><li>
<p><a href="#label-Setup+requirements">Setup requirements</a></p>
</li><li>
<p><a href="#label-Beginning+with+safe_roles">Beginning with safe_roles</a></p>
</li></ul>
</li><li>
<p><a href="#label-Usage">Usage - Configuration options and additional
functionality</a></p>
</li><li>
<p><a href="#label-Reference">Reference - An under-the-hood peek at what the module
is doing and how</a></p>
</li><li>
<p><a href="#label-Limitations">Limitations - OS compatibility, etc.</a></p>
</li><li>
<p><a href="#label-Development">Development - Guide for contributing to the
module</a></p>
</li></ol>

<h2 id="label-Description">Description</h2>

<p>Just a very simple module to convert:</p>
<ul><li>
<p>A role fact <code>role</code> into a <code>safe_role</code></p>
</li><li>
<p>A trusted fact role <code>pp_role</code> into <code>safe_pp_role</code></p>
</li></ul>

<p>The conversion process is to convert double colons (<code>::</code>) into
slashes (<code>/</code>).</p>

<p>This lets us write <code>hiera.yaml</code> files that look like this:</p>

<pre class="code ruby"><code class="ruby">:hierarchy:
  - &quot;node/%{clientcert}&quot;.yaml
  - &quot;role/%{safe_role}&quot;.yaml
  - &quot;app_tier/%{app_tier}&quot;.yaml
  - &quot;datacenter/%{datacenter}&quot;.yaml
  - &quot;env/%{environment}&quot;.yaml
  - common.yaml
</code></pre>

<p>â€¦So that for a node that has a <code>role</code> or <code>pp_role</code>
role value of <code>foo::bar::baz</code> will attempt to read hiera data
from <code>role/foo/bar/baz.yaml</code>. Of course <code>::</code> in
filenames is a terrible idea but it works at a push on Linux. For those not
living the dream, using this character in filenames will result in git
repositories that are impossible to checkout from git, hence the need for
this puppet module.</p>

<h2 id="label-Setup">Setup</h2>

<p>Just install the module and the facts will be created if applicable</p>

<h2 id="label-Limitations">Limitations</h2>
<ul><li>
<p>TODO: windows support (powershell)</p>
</li><li>
<p>Linux for support requires <code>openssl</code> and <code>awk</code> in the
path</p>
</li></ul>

<h2 id="label-Development">Development</h2>
<ul><li>
<p>Feel free to PR</p>
</li></ul>
</div></div>

      <div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div>

    </div>
  </body>
</html>